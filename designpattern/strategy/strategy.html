<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>策略模式 - strategy</title>
</head>

<body>

  <h1>策略模式</h1>

  <div id="list"></div>

  <script>

    // 表单验证策略对象
    let InputStrategy = function() {
      let strategy = {
        // 是否为空
        notNull: function(value) {
          return /\s+/.test(value);
        },
        // 是否是一个数字
        number: function(value) {
          return /^[0-9]+(\.[0-9]+)?$/.test(value);
        },
        phone: function(value) {
          return /^\d{3}\-\d{8}$|^\d{4}\-\d{7}$/.test(value);
        }
      };
      return {
        // 验证接口 type 算法 value 表单值
        check: function(type, value) {
          // 去除首尾空格
          value = value.replace(/^\s+|\s+$/, '');
          return strategy[type] ? strategy[type](value) : '没有该类型的检测方法';
        },
        // 添加策略
        addStrategy: function(type, fn) {
          if (!strategy[type]) {
            strategy[type] = fn;
          }
          else {
            throw new Error('不能重复添加策略算法');
          }
        }
      };
    };

    let inputStrategy = new InputStrategy();
    console.log(inputStrategy.check('phone', '222-3569852500'));

  </script>

</body>
</html>